<div class="contenedor-clinico">
  <header class="cabecera-clinica">
    <h1 class="title">Registro de Consulta</h1>
    <div class="decoracion-azul"></div>
  </header>

  <form class="formulario-clinico" (submit)="registrarConsulta($event)">
    <div class="fila-formulario">
      <div class="grupo-campo">
        <label for="id_paciente">Paciente *</label>
        
        <div *ngIf="cargando" class="mensaje-carga">
          Cargando lista de pacientes...
        </div>
        
        <div *ngIf="error" class="mensaje-error">
          {{ error }}
        </div>
        
        <select id="id_paciente" name="id_paciente" required [disabled]="cargando || error">
          <option value="">-- Selecciona un paciente --</option>
          <option *ngFor="let paciente of pacientes" [value]="paciente.id_paciente">
            {{ paciente.nombre_1 }} {{ paciente.nombre_2 || '' }} {{ paciente.apellido_1 }} 
            {{ paciente.apellido_2 || '' }} ({{ paciente.id_paciente }})
          </option>
        </select>
      </div>
    </div>

    <div class="fila-formulario">
      <div class="grupo-campo full-width">
        <label for="motivo_consulta">Motivo de la Consulta *</label>
        <input type="text" id="motivo_consulta" name="motivo_consulta" required placeholder="Ej: Dolor abdominal">
      </div>
    </div>

    <div class="fila-formulario fila-signos-vitales">
      <div class="grupo-campo">
        <label for="fecha_consulta">Fecha de la Consulta</label>
        <input type="date" id="fecha_consulta" name="fecha_consulta" [value]="fechaHoy" readonly>
      </div>
      <div class="grupo-campo">
        <label for="peso">Peso (kg)</label>
        <input type="number" step="0.01" id="peso" name="peso" placeholder="Ej: 70.5">
      </div>
      <div class="grupo-campo">
        <label for="altura">Altura (cm)</label>
        <input type="number" step="0.01" id="altura" name="altura" placeholder="Ej: 175">
      </div>
      <div class="grupo-campo">
        <label for="frecuencia_cardiaca">Frecuencia Cardíaca (lpm)</label>
        <input type="number" id="frecuencia_cardiaca" name="frecuencia_cardiaca" placeholder="Ej: 72">
      </div>
      <div class="grupo-campo">
        <label for="presion_arterial">Presión Arterial</label>
        <input type="text" id="presion_arterial" name="presion_arterial" placeholder="Ej: 120/80">
      </div>
    </div>

    <div class="fila-formulario">
      <div class="grupo-campo full-width">
        <label for="id_diagnostico">Diagnóstico</label>
        <select id="id_diagnostico" name="id_diagnostico">
          <option value="">-- Seleccionar --</option>
          </select>
        <input type="text" placeholder="Otro (personalizado)" name="diagnostico_custom" class="input-custom-diagnostico">
      </div>
    </div>

    <div class="fila-formulario">
      <div class="grupo-campo">
        <label for="proxima_cita">Próxima Cita</label>
        <input type="date" id="proxima_cita" name="proxima_cita" required>
      </div>
    </div>

    <div class="contenedor-botones">
      <button type="submit" class="btn btn-guardar">Guardar Consulta</button>
      <button type="button" class="btn btn-cancelar" (click)="cancelarConsulta()">Cancelar</button>
    </div>
  </form>
</div>